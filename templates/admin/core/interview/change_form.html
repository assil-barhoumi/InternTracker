{% extends "admin/change_form.html" %}
{% load i18n admin_urls static admin_modify %}

{% block extrahead %}
{{ block.super }}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<style>
  .card { border: none; box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,.075); margin-bottom: 1.5rem; }
  .card-header { background: #f8f9fa; font-weight: 600; padding: 0.75rem 1.25rem; border-bottom: 1px solid rgba(0,0,0,.125); }
  .card-body { padding: 1.25rem; }
  .required label:after { content: " *"; color: #dc3545; }
  .form-control, .form-select, .vDateField, .vTimeField { width: 100%; margin-bottom: 1rem; }
  .submit-row { margin: 1rem 0; padding: 1rem; background: #f8f9fa; border-radius: 0.25rem; }
  .inline-group h2 {display: none !important;}
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-3">
  <form {% if has_file_field %}enctype="multipart/form-data"{% endif %} {% if form_url %}action="{{ form_url }}"{% endif %} method="post" novalidate>
    {% csrf_token %}

    {% if errors %}
      <div class="alert alert-danger">
        {% trans "Please correct the errors below." %}
        {{ adminform.form.non_field_errors }}
      </div>
    {% endif %}

    <div class="row">
      <div class="col-lg-8">
        <div class="card">
          <div class="card-header d-flex justify-content-between">
            <span>{% trans "Interview Details" %}</span>
            <span class="badge bg-{{ original.get_status_display|lower|default:'secondary' }}"style="color:#000;">
              {{ original.get_status_display|default:"Draft" }}
            </span>
          </div>
          <div class="card-body">
            {% for fieldset in adminform %}{% include "admin/includes/fieldset.html" %}{% endfor %}
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="card">
          <div class="card-header">{% trans "Actions" %}</div>
          <div class="card-body d-grid gap-2">
                <button type="submit" name="_save" class="btn btn-success"><i class="bi bi-save"></i> {% trans "Save" %}</button>
              <button type="submit" name="_addanother" class="btn btn-outline-secondary">{% trans "Save and add another" %}</button>
                <button type="submit" name="_continue" style="background-color:#cce5ff;color:#000;border:1px solid #99ccff;" class="btn">{% trans "Save and continue editing" %}</button>
                
                {% if show_delete_link and original %}
                    <a href="{% url opts|admin_urlname:'delete' original.pk|admin_urlquote %}" style="background-color:#dc3545;color:#fff;border:1px solid #dc3545;" class="btn">{% trans "Delete" %}</a>
                {% endif %}
                </div>
        </div>
      </div>
    </div>
  </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const addClass = (selector, className) =>
    document.querySelectorAll(selector).forEach(el => el.classList.add(className));

  addClass('input, select, textarea', 'form-control');
  addClass('.vDateField, .vTimeField', 'form-control');
  addClass('select', 'form-select');
  addClass('input[type=checkbox]', 'form-check-input');

  document.querySelectorAll('input[type=checkbox]').forEach(el => {
    if (!el.closest('.form-check')) {
      const wrapper = document.createElement('div');
      wrapper.className = 'form-check form-switch';
      el.parentNode.insertBefore(wrapper, el);
      wrapper.appendChild(el);
      const label = document.querySelector(`label[for="${el.id}"]`);
      if (label) wrapper.appendChild(label);
    }
  });

  document.querySelectorAll('.required input, .required select, .required textarea').forEach(el => {
    const label = document.querySelector(`label[for="${el.id}"]`);
    if (label && !label.querySelector('.text-danger')) {
      const span = document.createElement('span');
      span.className = 'text-danger';
      span.textContent = ' *';
      label.appendChild(span);
    }
  });
});
</script>
{% endblock %}